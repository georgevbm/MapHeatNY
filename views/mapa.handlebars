<div id="map" style=" background-color:red; width:100%; height: 100%; position:absolute;"></div>

<script>
    var map;
    var latitude;
    var longitude;
    var venuesDB = 57484;

    var aux = [];

    setTimeout(function () {
        initMap();
    }, 5000);

    $(function () {
        $.get("venues", {},
            function (data) {
                aux = data;
            }, "json");
    });

    function initMap() {
        map = new google.maps.Map(document.getElementById('map'), {
            center: new google.maps.LatLng(42.89080335202763, -74.68116702094304),
            zoom: 7
        });

        if (aux.length == 0) {
            console.log("Aguarde...");
        } else {
            for (var i = 0; i < venuesDB; i++) {
                var latLng = new google.maps.LatLng(aux[i]['venue']['lat'], aux[i]['venue']['lon']);
                var marker = new google.maps.Marker({
                    position: latLng,
                    map: map
                });
            }
        }
    }




</script>

<script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCLCikJSgRlE-ZJOobE8k59msXnQjret3A&callback=initMap"></script>

<button id="point" style="position: absolute;
	z-index: 2;
	top: 65px;
	right: 5px;
	font-size: 13px;
	background-color: #3071a9;
	color: #fff;
	border: 1px solid #285e8e;
	padding: 6px 12px;
	border-radius: 4px;">Ponto</button>

{{!--
<script type="text/javascript">
    var pointMostrar = false;

    var baseLayer = new ol.layer.Tile({
        source: new ol.source.OSM()
    });

    var view = new ol.View({
        center: ol.proj.fromLonLat([-74.2598707, 40.6976701]),
        zoom: 8,
        minZoom: 5
    });

    var map = new ol.Map({
        target: 'map',
        controls: ol.control.defaults().extend([
            new ol.control.ScaleLine(),
            new ol.control.ZoomSlider()
        ]),
        layers: [baseLayer],
        view: view
    });

    var style = new ol.style.Style({
        image: new ol.style.Circle({
            radius: 7,
            stroke: new ol.style.Stroke({
                color: '#FF0000',
                width: 3
            }),
            fill: new ol.style.Fill({
                color: '#FF0000'
            })
        })
    });

    var point = new ol.layer.Vector({
        source: new ol.source.Vector({
            features: [new ol.Feature({
                geometry: new ol.geom.Point(ol.proj.transform([-74.2598707, 40.6976701], 'EPSG:4326', 'EPSG:3857'))
            })]
        }),
        style: style
    });

    const button = document.getElementById('point');
    button.addEventListener('click', function (e) {
        if (!pointMostrar) {
            map.addLayer(point);
            pointMostrar = true;
        } else {
            map.removeLayer(point);
            pointMostrar = false;
        }
    });
</script> --}}

{{!-- {{#each venues}}
{{lat}}
{{lon}}
<br>
{{/each}} --}}